<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stylfy Optics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7e9e3;
            color: #333;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .main-container {
            max-width: 450px;
            margin: auto;
            background-color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
        }

        @media (min-width: 640px) {
            .main-container {
                border-radius: 20px;
                margin-top: 20px;
                margin-bottom: 20px;
                min-height: calc(100vh - 40px);
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .nav-icon {
            font-size: 1.5rem;
        }

        .nav-label {
            font-size: 0.75rem;
            line-height: 1rem;
        }
        
        .profile-image {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid #fff;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .profile-option {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .profile-option:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }
    </style>
</head>
<body class="bg-[#f7e9e3]">
    <div class="main-container">
        <!-- Home Page View -->
        <div id="homeView" class="w-full flex-1 flex flex-col fade-in">
            <!-- Header -->
            <header class="bg-white p-4 shadow-sm flex justify-between items-center rounded-t-[20px] md:rounded-t-none">
                <h1 class="text-2xl font-bold">Stylfy Optics</h1>
                <i class="fas fa-bars text-xl cursor-pointer"></i>
            </header>

            <!-- Main Content -->
            <main class="flex-1 overflow-y-auto p-4">
                <!-- Sale Banner -->
                <div class="relative w-full rounded-2xl overflow-hidden shadow-lg mb-6">
                    <img src="https://placehold.co/400x200/d4a373/ffffff?text=Summer+Sale" alt="Summer Sale: Up to 50% Off" class="w-full h-auto">
                    <div class="absolute inset-0 bg-black bg-opacity-40 flex items-end p-4">
                        <h2 class="text-white text-3xl font-bold leading-tight">Summer Sale: Up to 50% Off</h2>
                    </div>
                </div>

                <!-- Search Bar -->
                <div class="relative mb-6">
                    <i class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
                    <input type="text" placeholder="Search for products" class="w-full pl-12 pr-4 py-3 rounded-full bg-gray-100 focus:outline-none focus:ring-2 focus:ring-orange-300 transition-all duration-300">
                </div>

                <!-- Services Section -->
                <section>
                    <h3 class="text-2xl font-bold mb-4">Services</h3>
                    <div class="space-y-4">
                        <!-- Service Item -->
                        <div class="flex items-center bg-gray-50 rounded-2xl p-4 shadow-sm">
                            <div class="flex-1">
                                <h4 class="font-semibold text-lg">Prescription Glasses</h4>
                                <p class="text-gray-500 text-sm">Customized vision correction</p>
                            </div>
                            <img src="https://placehold.co/100x70/E6CCB2/7F5539?text=Glasses" alt="Prescription Glasses" class="rounded-lg w-24 h-auto">
                        </div>
                        
                        <!-- Service Item -->
                        <div class="flex items-center bg-gray-50 rounded-2xl p-4 shadow-sm">
                            <div class="flex-1">
                                <h4 class="font-semibold text-lg">Lenses Only</h4>
                                <p class="text-gray-500 text-sm">Upgrade your existing frames</p>
                            </div>
                            <img src="https://placehold.co/100x70/B0C4DE/000000?text=Lenses" alt="Lenses Only" class="rounded-lg w-24 h-auto">
                        </div>
                        
                        <!-- Service Item -->
                        <div class="flex items-center bg-gray-50 rounded-2xl p-4 shadow-sm">
                            <div class="flex-1">
                                <h4 class="font-semibold text-lg">Contact Lenses</h4>
                                <p class="text-gray-500 text-sm">Daily, weekly, and monthly options</p>
                            </div>
                            <img src="https://placehold.co/100x70/8D99AE/ffffff?text=Contacts" alt="Contact Lenses" class="rounded-lg w-24 h-auto">
                        </div>
                        
                        <!-- Service Item -->
                        <div class="flex items-center bg-gray-50 rounded-2xl p-4 shadow-sm">
                            <div class="flex-1">
                                <h4 class="font-semibold text-lg">Sunglasses/Without Power Frames</h4>
                                <p class="text-gray-500 text-sm">Stylish protection from the sun</p>
                            </div>
                            <img src="https://placehold.co/100x70/B79469/333333?text=Sunglasses" alt="Sunglasses" class="rounded-lg w-24 h-auto">
                        </div>
                    </div>
                </section>
            </main>
        </div>

        <!-- Profile Page View -->
        <div id="profileView" class="hidden w-full flex-1 flex flex-col items-center p-6 bg-gray-50 fade-in">
            <!-- Header -->
            <div class="w-full flex justify-start items-center mb-6">
                <i class="fas fa-arrow-left text-xl cursor-pointer" onclick="showView('home')"></i>
                <h1 class="flex-1 text-center text-xl font-bold">My Profile</h1>
            </div>

            <!-- Profile Info -->
            <div class="flex flex-col items-center my-6">
                <img id="profileImage" src="https://placehold.co/120x120/d4a373/ffffff?text=Avatar" alt="Profile Avatar" class="profile-image">
                <h2 id="profileName" class="text-2xl font-bold mt-4"></h2>
                <p id="profileEmail" class="text-gray-500"></p>
            </div>

            <!-- Profile Options -->
            <div class="w-full max-w-sm space-y-4">
                <div class="profile-option flex items-center justify-between p-4 bg-white rounded-xl shadow-sm cursor-pointer">
                    <span class="font-medium text-lg">Edit Personal Information</span>
                    <i class="fas fa-arrow-right text-gray-400"></i>
                </div>
                <div class="profile-option flex items-center justify-between p-4 bg-white rounded-xl shadow-sm cursor-pointer">
                    <span class="font-medium text-lg">My Orders</span>
                    <i class="fas fa-arrow-right text-gray-400"></i>
                </div>
                <div class="profile-option flex items-center justify-between p-4 bg-white rounded-xl shadow-sm cursor-pointer">
                    <span class="font-medium text-lg">Settings</span>
                    <i class="fas fa-arrow-right text-gray-400"></i>
                </div>
                <button id="logoutButton" class="w-full text-center py-3 px-4 bg-red-500 text-white font-bold rounded-xl mt-6 shadow-md transition-transform hover:scale-[1.02]">
                    Logout
                </button>
            </div>
        </div>

        <!-- Bottom Navigation Bar -->
        <nav class="bg-white p-2 shadow-inner-2xl flex justify-around items-center rounded-b-[20px] md:rounded-b-none border-t border-gray-200">
            <a href="#" class="flex flex-col items-center p-2 text-gray-500 hover:text-orange-500 transition-colors duration-300" onclick="showView('home', this)">
                <i class="fas fa-home nav-icon"></i>
                <span class="nav-label">Home</span>
            </a>
            <a href="#" class="flex flex-col items-center p-2 text-gray-500 hover:text-orange-500 transition-colors duration-300">
                <i class="fas fa-box nav-icon"></i>
                <span class="nav-label">My Orders</span>
            </a>
            <a href="#" class="flex flex-col items-center p-2 text-gray-500 hover:text-orange-500 transition-colors duration-300" onclick="showView('profile', this)">
                <i class="fas fa-user nav-icon"></i>
                <span class="nav-label">My Profile</span>
            </a>
            <a href="#" class="flex flex-col items-center p-2 text-gray-500 hover:text-orange-500 transition-colors duration-300">
                <i class="fas fa-shopping-cart nav-icon"></i>
                <span class="nav-label">Cart</span>
            </a>
        </nav>
    </div>

    <!-- Firebase SDKs for Auth -->
    <script type="module">
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js";
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";

        // IMPORTANT: Use the same firebaseConfig as your login page.
        // I've kept placeholders here, but you must replace them with your actual config.
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID",
            measurementId: "YOUR_MEASUREMENT_ID"
        };
        
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // Function to switch between views
        window.showView = function(viewId, element = null) {
            const views = ['homeView', 'profileView'];
            views.forEach(id => {
                document.getElementById(id).classList.add('hidden');
                document.getElementById(id).classList.remove('fade-in');
            });
            document.getElementById(viewId).classList.remove('hidden');
            document.getElementById(viewId).classList.add('fade-in');
            
            // Highlight the active nav icon
            if (element) {
                document.querySelectorAll('nav a').forEach(link => link.classList.remove('text-orange-500'));
                element.classList.add('text-orange-500');
            }
        };

        // Initialize the view to 'homeView' on page load and highlight the nav icon.
        window.onload = function() {
            showView('homeView', document.querySelector('a[onclick*="home"]'));
        };

        // Listen for authentication state changes
        onAuthStateChanged(auth, (user) => {
            if (user) {
                console.log("User is signed in:", user);
                // Update profile page content
                document.getElementById('profileName').textContent = user.displayName || 'User';
                document.getElementById('profileEmail').textContent = user.email || '';
                // You can set the profile image here if you have one
                // document.getElementById('profileImage').src = user.photoURL || 'default-avatar.png';
            } else {
                console.log("User is signed out.");
                // Redirect to login page if user logs out or is not authenticated
                window.location.href = 'index.html'; 
            }
        });

        // Logout functionality
        document.getElementById('logoutButton').addEventListener('click', () => {
            signOut(auth).then(() => {
                console.log("User signed out successfully.");
                // The onAuthStateChanged listener will handle the redirection.
            }).catch((error) => {
                console.error("Error signing out:", error);
                // Handle the error (e.g., show a notification)
            });
        });

    </script>
</body>
</html>
